// Generated by CoffeeScript 1.8.0
(function() {
  var hue, init, ip, lights, user;

  ip = null;

  user = 'newdeveloper';

  hue = null;

  lights = null;

  init = function() {
    var dfd;
    dfd = $.Deferred();
    return $.ajax({
      url: "https://www.meethue.com/api/nupnp",
      type: "GET",
      success: function(json) {
        ip = json[0]['internalipaddress'];
        hue = new HueController(ip, user);
        return hue.getLights().then(function(result) {
          lights = result;
          return dfd.resolve();
        });
      },
      error: function(err) {
        console.log('Error: ' + err);
        return dfd.reject();
      }
    }).done(function() {
      return dfd.promise();
    });
  };

  window.onload = function() {
    return init().then(function(result) {
      var Bri, Effect, Light, Param, i, index, lights_dom, _i, _results;
      $('#select_lights').append('<select id="lights"></select>');
      lights_dom = $('#lights');
      _results = [];
      for (index = _i = 0; _i <= 4; index = ++_i) {
        console.log(index);
        i = index.toString();
        lights_dom.append("<option value=\"" + i + "\">" + i + "</option>");
        $('#light_param').append("<div id\"" + i + "param\"></div>");
        Param = $("#" + i + "param");
        Light = $("<select name=\"slider\" id=\"" + i + "Light\" data-role=\"slider\"></select>").append('<option value="off">Off</option>').append('<option value="on">On</option>');
        Effect = $("<select name=\"slider\" id=\"" + i + "Effect\" data-role=\"slider\"></select>").append('<option value="off">Off</option>').append('<option value="on">On</option>');
        Bri = $("<div id=\"" + i + "Bri\" style=\"width:300px;\"></div>");
        _results.push(Param.append(Light).append(Effect).append(Bri));
      }
      return _results;
    });
  };

}).call(this);
